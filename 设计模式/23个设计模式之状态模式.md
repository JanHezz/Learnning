---
  title: 23个设计模式之命令模式
  date: {{ date }}   
  categories: ['后端']
  tags: ['Java','设计模式']       
  comments: true    
  img:             
---


## 什么是状态模式？
在大话模式设计中是这样定义的：**当一个对象的内在状态改变时，允许改变其行为，这个对象看起来像是改变了其类。**
![5aa5e25f8feead9cbff88cdeece1682b.png](en-resource://database/567:1)

## 状态模式的应用场景
1.在if判断过多，或者switch判断过多的情况下。这时候就可以考虑使用状态模式。把状态的判断转移到具体的实现类中把负杂的逻辑简单化。（如果一两个判断，逻辑简单就没必要了）
2. 在工作流和游戏开发中状态模式都得到了广泛的应用，例如公文状态的转换、游戏中角色的升级等。

这边举个例子：住酒店，相对于房子来说，一般是有三个状态，空闲，入住，预定。每个状态的逻辑肯定不同。如果扎堆写那就说不过去了吧。

## 状态模式的优点
(1) 封装了状态的转换规则，在状态模式中可以将状态的转换代码封装在环境类或者具体状态类中，可以对状态转换代码进行集中管理，而不是分散在一个个业务方法中。

(2) 将所有与某个状态有关的行为放到一个类中，只需要注入一个不同的状态对象即可使环境对象拥有不同的行为。

(3) 允许状态转换逻辑与状态对象合成一体，而不是提供一个巨大的条件语句块，状态模式可以让我们避免使用庞大的条件语句来将业务方法和状态转换代码交织在一起。

(4) 可以让多个环境对象共享一个状态对象，从而减少系统中对象的个数。

## 状态模式的缺点
(1) 状态模式的使用必然会增加系统中类和对象的个数，导致系统运行开销增大。

(2) 状态模式的结构与实现都较为复杂，如果使用不当将导致程序结构和代码的混乱，增加系统设计的难度。

(3) 状态模式对“开闭原则”的支持并不太好，增加新的状态类需要修改那些负责状态转换的源代码，否则无法转换到新增状态；而且修改某个状态类的行为也需修改对应类的源代码。

## 总结
状态模式是对多态性的很好的运用，跟多态是息息相关的。写了个demo下来后的感觉就是发现其实状态模式最大的优点就是把每个状态具体的实现给分开了。让代码看过去非常的清晰。
